(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{IzMM:function(i,e,t){"use strict";t.r(e),t.d(e,"ClientsPageModule",(function(){return U}));var n=t("ofXK"),c=t("3Pt+"),l=t("tyNb"),o=t("TEn/"),a=t("mrSG"),r=t("ShvM"),b=t("PZfV"),s=t("fXoL");function d(i,e){if(1&i){const i=s.Qb();s.Pb(0,"ion-card",3),s.Xb("click",(function(){return s.kc(i),s.Zb(2).navigateToDetail()})),s.Pb(1,"ion-avatar",4),s.Lb(2,"img",5),s.Ob(),s.Pb(3,"h3",6),s.pc(4),s.Ob(),s.Ob()}if(2&i){const i=s.Zb(2);s.Ab(2),s.fc("src",i.client.profilePicture,s.lc),s.Ab(2),s.rc(" ",i.client.fullName," ")}}function f(i,e){if(1&i){const i=s.Qb();s.Pb(0,"ion-card",7),s.Xb("click",(function(){return s.kc(i),s.Zb(2).navigateToDetail()})),s.Pb(1,"ion-avatar",8),s.Lb(2,"img",5),s.Ob(),s.Pb(3,"h3"),s.pc(4),s.Ob(),s.Ob()}if(2&i){const i=s.Zb(2);s.Ab(2),s.fc("src",i.client.profilePicture,s.lc),s.Ab(2),s.rc(" ",i.client.fullName," ")}}function u(i,e){if(1&i&&(s.Nb(0),s.nc(1,d,5,2,"ion-card",1),s.nc(2,f,5,2,"ion-card",2),s.Mb()),2&i){const i=s.Zb();s.Ab(1),s.fc("ngIf",!i.visualHelper.isSideMenuVisibe),s.Ab(1),s.fc("ngIf",i.visualHelper.isSideMenuVisibe)}}t("yHDG");let g=(()=>{class i{constructor(i,e,t){this.router=i,this.route=e,this.visualHelper=t}navigateToDetail(){this.router.navigate(["client-detail",this.client.id],{relativeTo:this.route})}}return i.\u0275fac=function(e){return new(e||i)(s.Kb(l.g),s.Kb(l.a),s.Kb(b.a))},i.\u0275cmp=s.Eb({type:i,selectors:[["client-card"]],inputs:{client:"client"},decls:1,vars:1,consts:[[4,"ngIf"],["class","flex-row",3,"click",4,"ngIf"],["class","flex-column","style","align-items: center;",3,"click",4,"ngIf"],[1,"flex-row",3,"click"],[2,"margin","10px"],[3,"src"],[1,"client-name-header"],[1,"flex-column",2,"align-items","center",3,"click"],[2,"margin-top","10px"]],template:function(i,e){1&i&&s.nc(0,u,3,2,"ng-container",0),2&i&&s.fc("ngIf",e.client)},directives:[n.k,o.k,o.e],styles:[".client-name-header[_ngcontent-%COMP%]{margin-left:10px;padding-top:10px}"]}),i})();function p(i,e){if(1&i&&(s.Pb(0,"ion-col",2),s.Lb(1,"client-card",3),s.Ob()),2&i){const i=e.$implicit,t=s.Zb(2);s.fc("size",t.visualHelper.getClientCardGridSize()),s.Ab(1),s.fc("client",i)}}function m(i,e){if(1&i&&(s.Pb(0,"ion-grid"),s.Pb(1,"ion-row"),s.nc(2,p,2,2,"ion-col",1),s.Ob(),s.Ob()),2&i){const i=s.Zb();s.Ab(2),s.fc("ngForOf",i.clients)}}let h=(()=>{class i{constructor(i,e){this.clientCache=i,this.visualHelper=e}ngOnInit(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.clientCache.loaded,this.clients=this.clientCache.clients}))}}return i.\u0275fac=function(e){return new(e||i)(s.Kb(r.a),s.Kb(b.a))},i.\u0275cmp=s.Eb({type:i,selectors:[["app-clients"]],decls:6,vars:1,consts:[[4,"ngIf"],[3,"size",4,"ngFor","ngForOf"],[3,"size"],[3,"client"]],template:function(i,e){1&i&&(s.Pb(0,"ion-header"),s.Pb(1,"ion-toolbar"),s.Pb(2,"ion-title"),s.pc(3,"Clients"),s.Ob(),s.Ob(),s.Ob(),s.Pb(4,"ion-content"),s.nc(5,m,3,1,"ion-grid",0),s.Ob()),2&i&&(s.Ab(5),s.fc("ngIf",e.clients))},directives:[o.r,o.L,o.J,o.n,n.k,o.q,o.D,n.j,o.m,g],styles:[""]}),i})();var P=t("hcQm"),O=t("F4Db"),v=t("H7h6"),A=t("2g2N"),I=t("64sz"),C=t("xgIS"),y=t("wO+i"),k=t("pxUr"),Z=t("kUBF");const w=["imageInput"];function F(i,e){if(1&i&&(s.Pb(0,"ion-title"),s.pc(1),s.Ob()),2&i){const i=s.Zb();s.Ab(1),s.qc(i.client.fullName)}}function x(i,e){if(1&i&&(s.Pb(0,"a",15),s.pc(1),s.Ob()),2&i){const i=s.Zb(3);s.fc("href","tel:"+i.client.phoneNumber,s.lc),s.Ab(1),s.qc(i.client.phoneNumber)}}function S(i,e){if(1&i&&(s.Pb(0,"ion-item",9),s.Pb(1,"ion-label"),s.pc(2,"Phone number"),s.Ob(),s.nc(3,x,2,2,"a",14),s.Ob()),2&i){const i=s.Zb(2);s.Ab(3),s.fc("ngIf",i.client.phoneNumber)}}function T(i,e){if(1&i&&(s.Pb(0,"ion-item",9),s.Pb(1,"ion-label"),s.pc(2,"Email"),s.Ob(),s.pc(3),s.Ob()),2&i){const i=s.Zb(2);s.Ab(3),s.rc(" ",i.client.email," ")}}function H(i,e){if(1&i&&(s.Pb(0,"ion-item",9),s.Pb(1,"ion-label"),s.pc(2,"City"),s.Ob(),s.pc(3),s.Ob()),2&i){const i=s.Zb(2);s.Ab(3),s.rc(" ",i.client.address.city," ")}}function z(i,e){if(1&i&&(s.Pb(0,"ion-item",9),s.Pb(1,"ion-label"),s.pc(2,"Street"),s.Ob(),s.pc(3),s.Ob()),2&i){const i=s.Zb(2);s.Ab(3),s.rc(" ",i.client.address.street," ")}}function K(i,e){if(1&i&&(s.Pb(0,"ion-item",9),s.Pb(1,"ion-label"),s.pc(2,"Building number"),s.Ob(),s.pc(3),s.Ob()),2&i){const i=s.Zb(2);s.Ab(3),s.rc(" ",i.client.address.buildingNumber," ")}}function j(i,e){if(1&i&&(s.Pb(0,"ion-item",9),s.Pb(1,"ion-label"),s.pc(2,"Zip"),s.Ob(),s.pc(3),s.Ob()),2&i){const i=s.Zb(2);s.Ab(3),s.rc(" ",i.client.address.postCode," ")}}function M(i,e){if(1&i&&(s.Pb(0,"agm-map",16),s.Lb(1,"agm-marker",17),s.Ob()),2&i){const i=s.Zb(2);s.fc("latitude",i.lat)("longitude",i.lng)("zoom",15),s.Ab(1),s.fc("latitude",i.lat)("longitude",i.lng)}}function D(i,e){if(1&i&&(s.Pb(0,"div",24),s.Lb(1,"action-item-card",25),s.Ob()),2&i){const i=e.$implicit;s.Ab(1),s.fc("headerText",i.action.name)("fromTime",i.plannedStartTime)("untilTime",i.plannedEndTime)("bgCss","bg-default")}}function N(i,e){if(1&i&&(s.Nb(0),s.Pb(1,"ion-item-divider",21),s.pc(2),s.Ob(),s.Pb(3,"div",22),s.nc(4,D,2,4,"div",23),s.Ob(),s.Mb()),2&i){const i=e.$implicit,t=s.Zb(3);s.Ab(2),s.rc(" ",t.generalHelper.getDayNameByIndex(i.day)," "),s.Ab(2),s.fc("ngForOf",i.agreedActions)}}function L(i,e){if(1&i&&(s.Pb(0,"ion-col",18),s.Pb(1,"ion-card"),s.Pb(2,"ion-card-title",19),s.pc(3),s.ac(4,"date"),s.ac(5,"date"),s.Ob(),s.nc(6,N,5,2,"ng-container",20),s.Ob(),s.Ob()),2&i){const i=e.$implicit,t=s.Zb(2);s.fc("size",t.visualHelper.getBasicDataGridSize()),s.Ab(3),s.sc("",s.bc(4,4,i.validFrom)," - ",s.bc(5,6,i.validUntil),""),s.Ab(3),s.fc("ngForOf",i.actionsForDay)}}function B(i,e){if(1&i){const i=s.Qb();s.Nb(0),s.Pb(1,"div",2),s.Pb(2,"ion-avatar",3),s.Lb(3,"img",4),s.Ob(),s.Ob(),s.Pb(4,"div",2),s.Pb(5,"input",5,6),s.Xb("change",(function(e){return s.kc(i),s.Zb().processFile(e)})),s.Ob(),s.Pb(7,"ion-button",7),s.Xb("click",(function(){return s.kc(i),s.Zb().changeClientProfilePicture()})),s.Lb(8,"ion-icon",8),s.pc(9," Change photo "),s.Ob(),s.Ob(),s.Pb(10,"ion-item",9),s.Pb(11,"ion-label"),s.pc(12,"Birthdate"),s.Ob(),s.pc(13),s.ac(14,"date"),s.Ob(),s.Pb(15,"ion-item",9),s.Pb(16,"ion-label"),s.pc(17,"Gender"),s.Ob(),s.pc(18),s.Ob(),s.Pb(19,"ion-item-divider",10),s.Pb(20,"h5"),s.pc(21,"Contact information"),s.Ob(),s.Ob(),s.nc(22,S,4,1,"ion-item",11),s.nc(23,T,4,1,"ion-item",11),s.Pb(24,"ion-item-divider",10),s.Pb(25,"h5"),s.pc(26,"Address"),s.Ob(),s.Ob(),s.nc(27,H,4,1,"ion-item",11),s.nc(28,z,4,1,"ion-item",11),s.nc(29,K,4,1,"ion-item",11),s.nc(30,j,4,1,"ion-item",11),s.nc(31,M,2,5,"agm-map",12),s.Pb(32,"ion-item-divider",10),s.Pb(33,"h5"),s.pc(34,"Individual plans"),s.Ob(),s.Ob(),s.Pb(35,"ion-grid"),s.Pb(36,"ion-row"),s.nc(37,L,7,8,"ion-col",13),s.Ob(),s.Ob(),s.Mb()}if(2&i){const i=s.Zb();s.Ab(3),s.fc("src",i.client.profilePicture,s.lc),s.Ab(10),s.rc(" ",s.bc(14,11,i.client.birthDate)," "),s.Ab(5),s.rc(" ",i.generalHelper.getGenderString(i.client.gender)," "),s.Ab(4),s.fc("ngIf",i.client.address.city),s.Ab(1),s.fc("ngIf",i.client.address.city),s.Ab(4),s.fc("ngIf",i.client.address.city),s.Ab(1),s.fc("ngIf",i.client.address.street),s.Ab(1),s.fc("ngIf",i.client.address.buildingNumber),s.Ab(1),s.fc("ngIf",i.client.address.postCode),s.Ab(1),s.fc("ngIf",i.lat&&i.lng),s.Ab(6),s.fc("ngForOf",i.individualPlans)}}let E=(()=>{class i{constructor(i,e,t,n,c,l,o,a,r){this.clientCache=i,this.activatedRoute=e,this.imageHelper=t,this.plansService=n,this.clientsService=c,this.toaster=l,this.generalHelper=o,this.visualHelper=a,this.platform=r}ngOnInit(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.clientCache.loaded;let i=this.activatedRoute.snapshot.paramMap.get("id");this.client=this.clientCache.getClientById(i),this.getIndividualPlans(),this.lat=+this.client.address.coordinates.latitude,this.lng=+this.client.address.coordinates.longitude}))}getIndividualPlans(){return Object(a.a)(this,void 0,void 0,(function*(){let i=yield this.plansService.apiIndividualPlansGet(this.client.id);this.individualPlans=i}))}changeClientProfilePicture(){return Object(a.a)(this,void 0,void 0,(function*(){if(!1===this.platform.is("capacitor"))return void this.imageInput.nativeElement.click();let i=yield this.imageHelper.getImageAsBase64FromDevice();null!=i&&this.clientsService.apiClientsChangeProfilePicturePost(this.client.id,{pictureUri:i}).then(()=>Object(a.a)(this,void 0,void 0,(function*(){let i=yield this.clientCache.reloadSingleClient(this.client.id);this.client=i}))).catch(()=>this.toaster.showErrorToast("Changing image failed"))}))}processFile(i){let e=i.target.files,t=e[0];if(e&&t){let i=new FileReader;this.imageToBase64(i,t).subscribe(i=>{null!=i&&this.clientsService.apiClientsChangeProfilePicturePost(this.client.id,{pictureUri:i}).then(()=>Object(a.a)(this,void 0,void 0,(function*(){let i=yield this.clientCache.reloadSingleClient(this.client.id);this.client=i}))).catch(()=>this.toaster.showErrorToast("Changing image failed"))})}}imageToBase64(i,e){return i.readAsDataURL(e),Object(C.a)(i,"load").pipe(Object(y.a)("currentTarget","result"))}}return i.\u0275fac=function(e){return new(e||i)(s.Kb(r.a),s.Kb(l.a),s.Kb(O.a),s.Kb(v.d),s.Kb(v.b),s.Kb(A.a),s.Kb(I.a),s.Kb(b.a),s.Kb(o.R))},i.\u0275cmp=s.Eb({type:i,selectors:[["app-client-detail"]],viewQuery:function(i,e){var t;1&i&&s.tc(w,!0),2&i&&s.ic(t=s.Yb())&&(e.imageInput=t.first)},decls:7,vars:2,consts:[["slot","start"],[4,"ngIf"],[1,"flex-center"],[1,"avatar-big"],[3,"src"],["type","file","hidden","","accept","image/*",3,"change"],["imageInput",""],["ion-button","","fill","clear","size","small",3,"click"],["name","camera","slot","icon-only"],["lines","full","mode","md"],[1,"item-separator"],["lines","full","mode","md",4,"ngIf"],[3,"latitude","longitude","zoom",4,"ngIf"],[3,"size",4,"ngFor","ngForOf"],[3,"href",4,"ngIf"],[3,"href"],[3,"latitude","longitude","zoom"],[3,"latitude","longitude"],[3,"size"],[2,"text-align","center"],[4,"ngFor","ngForOf"],[1,"divider-day"],[1,"flex-column",2,"align-items","flex-end","margin-top","10px"],["class","action-item-small",4,"ngFor","ngForOf"],[1,"action-item-small"],[3,"headerText","fromTime","untilTime","bgCss"]],template:function(i,e){1&i&&(s.Pb(0,"ion-header"),s.Pb(1,"ion-toolbar"),s.Pb(2,"ion-buttons",0),s.Lb(3,"ion-back-button"),s.Ob(),s.nc(4,F,2,1,"ion-title",1),s.Ob(),s.Ob(),s.Pb(5,"ion-content"),s.nc(6,B,38,13,"ng-container",1),s.Ob()),2&i&&(s.Ab(4),s.fc("ngIf",e.client),s.Ab(2),s.fc("ngIf",e.client))},directives:[o.r,o.L,o.j,o.f,o.g,n.k,o.n,o.J,o.e,o.i,o.s,o.w,o.z,o.x,o.q,o.D,n.j,k.c,k.d,o.m,o.k,o.l,Z.a],pipes:[n.d],styles:["agm-map[_ngcontent-%COMP%]{height:300px}.divider-day[_ngcontent-%COMP%]{color:#000;background-color:#ffff80}"]}),i})();const G=[{path:":id",component:E}];let Q=(()=>{class i{}return i.\u0275mod=s.Ib({type:i}),i.\u0275inj=s.Hb({factory:function(e){return new(e||i)},imports:[[n.b,c.a,o.M,P.a,l.j.forChild(G),k.a.forRoot({apiKey:"AIzaSyCQsd5nCdDeiSvHmgbcSt8Fbk7AOLqPmZw"})]]}),i})();const R=[{path:"",component:h},{path:"client-detail/:id",component:E}];let U=(()=>{class i{}return i.\u0275mod=s.Ib({type:i}),i.\u0275inj=s.Hb({factory:function(e){return new(e||i)},imports:[[n.b,Q,c.a,o.M,l.j.forChild(R),P.a]]}),i})()}}]);