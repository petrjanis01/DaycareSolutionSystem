function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var n=0;n<i.length;n++){var t=i[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,i,n){return i&&_defineProperties(e.prototype,i),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{IzMM:function(e,i,n){"use strict";n.r(i),n.d(i,"ClientsPageModule",(function(){return $}));var t=n("ofXK"),c=n("3Pt+"),r=n("tyNb"),a=n("TEn/"),o=n("mrSG"),l=n("ShvM"),s=n("PZfV"),b=n("fXoL");function u(e,i){if(1&e){var n=b.Qb();b.Pb(0,"ion-card",3),b.Xb("click",(function(){return b.kc(n),b.Zb(2).navigateToDetail()})),b.Pb(1,"ion-avatar",4),b.Lb(2,"img",5),b.Ob(),b.Pb(3,"h3",6),b.pc(4),b.Ob(),b.Ob()}if(2&e){var t=b.Zb(2);b.Ab(2),b.fc("src",t.client.profilePicture,b.lc),b.Ab(2),b.rc(" ",t.client.fullName," ")}}function f(e,i){if(1&e){var n=b.Qb();b.Pb(0,"ion-card",7),b.Xb("click",(function(){return b.kc(n),b.Zb(2).navigateToDetail()})),b.Pb(1,"ion-avatar",8),b.Lb(2,"img",5),b.Ob(),b.Pb(3,"h3"),b.pc(4),b.Ob(),b.Ob()}if(2&e){var t=b.Zb(2);b.Ab(2),b.fc("src",t.client.profilePicture,b.lc),b.Ab(2),b.rc(" ",t.client.fullName," ")}}function d(e,i){if(1&e&&(b.Nb(0),b.nc(1,u,5,2,"ion-card",1),b.nc(2,f,5,2,"ion-card",2),b.Mb()),2&e){var n=b.Zb();b.Ab(1),b.fc("ngIf",!n.visualHelper.isSideMenuVisibe),b.Ab(1),b.fc("ngIf",n.visualHelper.isSideMenuVisibe)}}n("yHDG");var p,g=((p=function(){function e(i,n,t){_classCallCheck(this,e),this.router=i,this.route=n,this.visualHelper=t}return _createClass(e,[{key:"navigateToDetail",value:function(){this.router.navigate(["client-detail",this.client.id],{relativeTo:this.route})}}]),e}()).\u0275fac=function(e){return new(e||p)(b.Kb(r.g),b.Kb(r.a),b.Kb(s.a))},p.\u0275cmp=b.Eb({type:p,selectors:[["client-card"]],inputs:{client:"client"},decls:1,vars:1,consts:[[4,"ngIf"],["class","flex-row",3,"click",4,"ngIf"],["class","flex-column","style","align-items: center;",3,"click",4,"ngIf"],[1,"flex-row",3,"click"],[2,"margin","10px"],[3,"src"],[1,"client-name-header"],[1,"flex-column",2,"align-items","center",3,"click"],[2,"margin-top","10px"]],template:function(e,i){1&e&&b.nc(0,d,3,2,"ng-container",0),2&e&&b.fc("ngIf",i.client)},directives:[t.k,a.k,a.e],styles:[".client-name-header[_ngcontent-%COMP%]{margin-left:10px;padding-top:10px}"]}),p);function m(e,i){if(1&e&&(b.Pb(0,"ion-col",2),b.Lb(1,"client-card",3),b.Ob()),2&e){var n=i.$implicit,t=b.Zb(2);b.fc("size",t.visualHelper.getClientCardGridSize()),b.Ab(1),b.fc("client",n)}}function h(e,i){if(1&e&&(b.Pb(0,"ion-grid"),b.Pb(1,"ion-row"),b.nc(2,m,2,2,"ion-col",1),b.Ob(),b.Ob()),2&e){var n=b.Zb();b.Ab(2),b.fc("ngForOf",n.clients)}}var v,P=((v=function(){function e(i,n){_classCallCheck(this,e),this.clientCache=i,this.visualHelper=n}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.clientCache.loaded;case 2:this.clients=this.clientCache.clients;case 3:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||v)(b.Kb(l.a),b.Kb(s.a))},v.\u0275cmp=b.Eb({type:v,selectors:[["app-clients"]],decls:6,vars:1,consts:[[4,"ngIf"],[3,"size",4,"ngFor","ngForOf"],[3,"size"],[3,"client"]],template:function(e,i){1&e&&(b.Pb(0,"ion-header"),b.Pb(1,"ion-toolbar"),b.Pb(2,"ion-title"),b.pc(3,"Clients"),b.Ob(),b.Ob(),b.Ob(),b.Pb(4,"ion-content"),b.nc(5,h,3,1,"ion-grid",0),b.Ob()),2&e&&(b.Ab(5),b.fc("ngIf",i.clients))},directives:[a.r,a.L,a.J,a.n,t.k,a.q,a.D,t.j,a.m,g],styles:[""]}),v),O=n("hcQm"),C=n("F4Db"),k=n("H7h6"),A=n("2g2N"),y=n("64sz"),I=n("xgIS"),w=n("wO+i"),x=n("pxUr"),Z=n("kUBF"),F=["imageInput"];function S(e,i){if(1&e&&(b.Pb(0,"ion-title"),b.pc(1),b.Ob()),2&e){var n=b.Zb();b.Ab(1),b.qc(n.client.fullName)}}function T(e,i){if(1&e&&(b.Pb(0,"a",15),b.pc(1),b.Ob()),2&e){var n=b.Zb(3);b.fc("href","tel:"+n.client.phoneNumber,b.lc),b.Ab(1),b.qc(n.client.phoneNumber)}}function R(e,i){if(1&e&&(b.Pb(0,"ion-item",9),b.Pb(1,"ion-label"),b.pc(2,"Phone number"),b.Ob(),b.nc(3,T,2,2,"a",14),b.Ob()),2&e){var n=b.Zb(2);b.Ab(3),b.fc("ngIf",n.client.phoneNumber)}}function H(e,i){if(1&e&&(b.Pb(0,"ion-item",9),b.Pb(1,"ion-label"),b.pc(2,"Email"),b.Ob(),b.pc(3),b.Ob()),2&e){var n=b.Zb(2);b.Ab(3),b.rc(" ",n.client.email," ")}}function j(e,i){if(1&e&&(b.Pb(0,"ion-item",9),b.Pb(1,"ion-label"),b.pc(2,"City"),b.Ob(),b.pc(3),b.Ob()),2&e){var n=b.Zb(2);b.Ab(3),b.rc(" ",n.client.address.city," ")}}function z(e,i){if(1&e&&(b.Pb(0,"ion-item",9),b.Pb(1,"ion-label"),b.pc(2,"Street"),b.Ob(),b.pc(3),b.Ob()),2&e){var n=b.Zb(2);b.Ab(3),b.rc(" ",n.client.address.street," ")}}function K(e,i){if(1&e&&(b.Pb(0,"ion-item",9),b.Pb(1,"ion-label"),b.pc(2,"Building number"),b.Ob(),b.pc(3),b.Ob()),2&e){var n=b.Zb(2);b.Ab(3),b.rc(" ",n.client.address.buildingNumber," ")}}function _(e,i){if(1&e&&(b.Pb(0,"ion-item",9),b.Pb(1,"ion-label"),b.pc(2,"Zip"),b.Ob(),b.pc(3),b.Ob()),2&e){var n=b.Zb(2);b.Ab(3),b.rc(" ",n.client.address.postCode," ")}}function M(e,i){if(1&e&&(b.Pb(0,"agm-map",16),b.Lb(1,"agm-marker",17),b.Ob()),2&e){var n=b.Zb(2);b.fc("latitude",n.lat)("longitude",n.lng)("zoom",15),b.Ab(1),b.fc("latitude",n.lat)("longitude",n.lng)}}function D(e,i){if(1&e&&(b.Pb(0,"div",24),b.Lb(1,"action-item-card",25),b.Ob()),2&e){var n=i.$implicit;b.Ab(1),b.fc("headerText",n.action.name)("fromTime",n.plannedStartTime)("untilTime",n.plannedEndTime)("bgCss","bg-default")}}function N(e,i){if(1&e&&(b.Nb(0),b.Pb(1,"ion-item-divider",21),b.pc(2),b.Ob(),b.Pb(3,"div",22),b.nc(4,D,2,4,"div",23),b.Ob(),b.Mb()),2&e){var n=i.$implicit,t=b.Zb(3);b.Ab(2),b.rc(" ",t.generalHelper.getDayNameByIndex(n.day)," "),b.Ab(2),b.fc("ngForOf",n.agreedActions)}}function L(e,i){if(1&e&&(b.Pb(0,"ion-col",18),b.Pb(1,"ion-card"),b.Pb(2,"ion-card-title",19),b.pc(3),b.ac(4,"date"),b.ac(5,"date"),b.Ob(),b.nc(6,N,5,2,"ng-container",20),b.Ob(),b.Ob()),2&e){var n=i.$implicit,t=b.Zb(2);b.fc("size",t.visualHelper.getBasicDataGridSize()),b.Ab(3),b.sc("",b.bc(4,4,n.validFrom)," - ",b.bc(5,6,n.validUntil),""),b.Ab(3),b.fc("ngForOf",n.actionsForDay)}}function E(e,i){if(1&e){var n=b.Qb();b.Nb(0),b.Pb(1,"div",2),b.Pb(2,"ion-avatar",3),b.Lb(3,"img",4),b.Ob(),b.Ob(),b.Pb(4,"div",2),b.Pb(5,"input",5,6),b.Xb("change",(function(e){return b.kc(n),b.Zb().processFile(e)})),b.Ob(),b.Pb(7,"ion-button",7),b.Xb("click",(function(){return b.kc(n),b.Zb().changeClientProfilePicture()})),b.Lb(8,"ion-icon",8),b.pc(9," Change photo "),b.Ob(),b.Ob(),b.Pb(10,"ion-item",9),b.Pb(11,"ion-label"),b.pc(12,"Birthdate"),b.Ob(),b.pc(13),b.ac(14,"date"),b.Ob(),b.Pb(15,"ion-item",9),b.Pb(16,"ion-label"),b.pc(17,"Gender"),b.Ob(),b.pc(18),b.Ob(),b.Pb(19,"ion-item-divider",10),b.Pb(20,"h5"),b.pc(21,"Contact information"),b.Ob(),b.Ob(),b.nc(22,R,4,1,"ion-item",11),b.nc(23,H,4,1,"ion-item",11),b.Pb(24,"ion-item-divider",10),b.Pb(25,"h5"),b.pc(26,"Address"),b.Ob(),b.Ob(),b.nc(27,j,4,1,"ion-item",11),b.nc(28,z,4,1,"ion-item",11),b.nc(29,K,4,1,"ion-item",11),b.nc(30,_,4,1,"ion-item",11),b.nc(31,M,2,5,"agm-map",12),b.Pb(32,"ion-item-divider",10),b.Pb(33,"h5"),b.pc(34,"Individual plans"),b.Ob(),b.Ob(),b.Pb(35,"ion-grid"),b.Pb(36,"ion-row"),b.nc(37,L,7,8,"ion-col",13),b.Ob(),b.Ob(),b.Mb()}if(2&e){var t=b.Zb();b.Ab(3),b.fc("src",t.client.profilePicture,b.lc),b.Ab(10),b.rc(" ",b.bc(14,11,t.client.birthDate)," "),b.Ab(5),b.rc(" ",t.generalHelper.getGenderString(t.client.gender)," "),b.Ab(4),b.fc("ngIf",t.client.address.city),b.Ab(1),b.fc("ngIf",t.client.address.city),b.Ab(4),b.fc("ngIf",t.client.address.city),b.Ab(1),b.fc("ngIf",t.client.address.street),b.Ab(1),b.fc("ngIf",t.client.address.buildingNumber),b.Ab(1),b.fc("ngIf",t.client.address.postCode),b.Ab(1),b.fc("ngIf",t.lat&&t.lng),b.Ab(6),b.fc("ngForOf",t.individualPlans)}}var B,G,Q,U=((B=function(){function e(i,n,t,c,r,a,o,l,s){_classCallCheck(this,e),this.clientCache=i,this.activatedRoute=n,this.imageHelper=t,this.plansService=c,this.clientsService=r,this.toaster=a,this.generalHelper=o,this.visualHelper=l,this.platform=s}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.clientCache.loaded;case 2:i=this.activatedRoute.snapshot.paramMap.get("id"),this.client=this.clientCache.getClientById(i),this.getIndividualPlans(),this.lat=+this.client.address.coordinates.latitude,this.lng=+this.client.address.coordinates.longitude;case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getIndividualPlans",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.plansService.apiIndividualPlansGet(this.client.id);case 2:i=e.sent,this.individualPlans=i;case 4:case"end":return e.stop()}}),e,this)})))}},{key:"changeClientProfilePicture",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this.platform.is("capacitor")){e.next=2;break}return e.abrupt("return",void this.imageInput.nativeElement.click());case 2:return e.next=4,this.imageHelper.getImageAsBase64FromDevice();case 4:null!=(i=e.sent)&&this.clientsService.apiClientsChangeProfilePicturePost(this.client.id,{pictureUri:i}).then((function(){return Object(o.a)(n,void 0,void 0,regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.clientCache.reloadSingleClient(this.client.id);case 2:i=e.sent,this.client=i;case 4:case"end":return e.stop()}}),e,this)})))})).catch((function(){return n.toaster.showErrorToast("Changing image failed")}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"processFile",value:function(e){var i=this,n=e.target.files,t=n[0];if(n&&t){var c=new FileReader;this.imageToBase64(c,t).subscribe((function(e){null!=e&&i.clientsService.apiClientsChangeProfilePicturePost(i.client.id,{pictureUri:e}).then((function(){return Object(o.a)(i,void 0,void 0,regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.clientCache.reloadSingleClient(this.client.id);case 2:i=e.sent,this.client=i;case 4:case"end":return e.stop()}}),e,this)})))})).catch((function(){return i.toaster.showErrorToast("Changing image failed")}))}))}}},{key:"imageToBase64",value:function(e,i){return e.readAsDataURL(i),Object(I.a)(e,"load").pipe(Object(w.a)("currentTarget","result"))}}]),e}()).\u0275fac=function(e){return new(e||B)(b.Kb(l.a),b.Kb(r.a),b.Kb(C.a),b.Kb(k.d),b.Kb(k.b),b.Kb(A.a),b.Kb(y.a),b.Kb(s.a),b.Kb(a.R))},B.\u0275cmp=b.Eb({type:B,selectors:[["app-client-detail"]],viewQuery:function(e,i){var n;1&e&&b.tc(F,!0),2&e&&b.ic(n=b.Yb())&&(i.imageInput=n.first)},decls:7,vars:2,consts:[["slot","start"],[4,"ngIf"],[1,"flex-center"],[1,"avatar-big"],[3,"src"],["type","file","hidden","","accept","image/*",3,"change"],["imageInput",""],["ion-button","","fill","clear","size","small",3,"click"],["name","camera","slot","icon-only"],["lines","full","mode","md"],[1,"item-separator"],["lines","full","mode","md",4,"ngIf"],[3,"latitude","longitude","zoom",4,"ngIf"],[3,"size",4,"ngFor","ngForOf"],[3,"href",4,"ngIf"],[3,"href"],[3,"latitude","longitude","zoom"],[3,"latitude","longitude"],[3,"size"],[2,"text-align","center"],[4,"ngFor","ngForOf"],[1,"divider-day"],[1,"flex-column",2,"align-items","flex-end","margin-top","10px"],["class","action-item-small",4,"ngFor","ngForOf"],[1,"action-item-small"],[3,"headerText","fromTime","untilTime","bgCss"]],template:function(e,i){1&e&&(b.Pb(0,"ion-header"),b.Pb(1,"ion-toolbar"),b.Pb(2,"ion-buttons",0),b.Lb(3,"ion-back-button"),b.Ob(),b.nc(4,S,2,1,"ion-title",1),b.Ob(),b.Ob(),b.Pb(5,"ion-content"),b.nc(6,E,38,13,"ng-container",1),b.Ob()),2&e&&(b.Ab(4),b.fc("ngIf",i.client),b.Ab(2),b.fc("ngIf",i.client))},directives:[a.r,a.L,a.j,a.f,a.g,t.k,a.n,a.J,a.e,a.i,a.s,a.w,a.z,a.x,a.q,a.D,t.j,x.c,x.d,a.m,a.k,a.l,Z.a],pipes:[t.d],styles:["agm-map[_ngcontent-%COMP%]{height:300px}.divider-day[_ngcontent-%COMP%]{color:#000;background-color:#ffff80}"]}),B),X=[{path:":id",component:U}],q=((G=function e(){_classCallCheck(this,e)}).\u0275mod=b.Ib({type:G}),G.\u0275inj=b.Hb({factory:function(e){return new(e||G)},imports:[[t.b,c.a,a.M,O.a,r.j.forChild(X),x.a.forRoot({apiKey:"AIzaSyCQsd5nCdDeiSvHmgbcSt8Fbk7AOLqPmZw"})]]}),G),J=[{path:"",component:P},{path:"client-detail/:id",component:U}],$=((Q=function e(){_classCallCheck(this,e)}).\u0275mod=b.Ib({type:Q}),Q.\u0275inj=b.Hb({factory:function(e){return new(e||Q)},imports:[[t.b,q,c.a,a.M,r.j.forChild(J),O.a]]}),Q)}}]);