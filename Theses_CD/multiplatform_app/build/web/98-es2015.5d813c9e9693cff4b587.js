(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{"723k":function(e,i,t){"use strict";t.r(i),t.d(i,"ProfilePageModule",(function(){return O}));var o=t("ofXK"),n=t("3Pt+"),r=t("tyNb"),l=t("TEn/"),c=t("mrSG"),a=t("F4Db"),s=t("H7h6"),b=t("2g2N"),p=t("ej43"),u=t("64sz"),h=t("PZfV"),f=t("xgIS"),m=t("wO+i"),g=t("fXoL");const d=["imageInput"];function y(e,i){if(1&e&&(g.Pb(0,"ion-title"),g.pc(1),g.Ob()),2&e){const e=g.Zb();g.Ab(1),g.qc(e.employeeDetail.fullName)}}function P(e,i){if(1&e){const e=g.Qb();g.Nb(0),g.Pb(1,"div",1),g.Pb(2,"ion-avatar",2),g.Lb(3,"img",3),g.Ob(),g.Ob(),g.Pb(4,"div",1),g.Pb(5,"input",4,5),g.Xb("change",(function(i){return g.kc(e),g.Zb().processFile(i)})),g.Ob(),g.Pb(7,"ion-button",6),g.Xb("click",(function(){return g.kc(e),g.Zb().changePhoto()})),g.Lb(8,"ion-icon",7),g.pc(9," Change photo "),g.Ob(),g.Ob(),g.Pb(10,"div",1),g.Pb(11,"ion-button",8),g.Xb("click",(function(){return g.kc(e),g.Zb().logout()})),g.Lb(12,"ion-icon",9),g.pc(13," Log out "),g.Ob(),g.Ob(),g.Lb(14,"div",1),g.Mb()}if(2&e){const e=g.Zb();g.Ab(3),g.fc("src",e.employeeDetail.profilePictureUri,g.lc)}}const v=[{path:"",component:(()=>{class e{constructor(e,i,t,o,n,r,l){this.imageHelper=e,this.employeeService=i,this.auth=t,this.toasterService=o,this.helper=n,this.visualHelper=r,this.platform=l}ngOnInit(){this.loadEmployeeProfile()}loadEmployeeProfile(){return Object(c.a)(this,void 0,void 0,(function*(){this.employeeDetail=yield this.employeeService.apiEmployeeGetEmployeeDetailGet(),null==this.employeeDetail.profilePictureUri&&(this.employeeDetail.profilePictureUri=this.helper.getAnonymousImgUrlFormatted())}))}changePhoto(){return Object(c.a)(this,void 0,void 0,(function*(){if(!1===this.platform.is("capacitor"))return void this.imageInput.nativeElement.click();let e=yield this.imageHelper.getImageAsBase64FromDevice();null!=e&&this.employeeService.apiEmployeeChangeProfilePicturePost(null,{pictureUri:e}).then(()=>this.loadEmployeeProfile()).catch(()=>this.toasterService.showErrorToast("Changing image failed"))}))}logout(){this.auth.logOut()}processFile(e){let i=e.target.files,t=i[0];if(i&&t){let e=new FileReader;this.imageToBase64(e,t).subscribe(e=>{null!=e&&this.employeeService.apiEmployeeChangeProfilePicturePost(null,{pictureUri:e}).then(()=>this.loadEmployeeProfile()).catch(()=>this.toasterService.showErrorToast("Changing image failed"))})}}imageToBase64(e,i){return e.readAsDataURL(i),Object(f.a)(e,"load").pipe(Object(m.a)("currentTarget","result"))}}return e.\u0275fac=function(i){return new(i||e)(g.Kb(a.a),g.Kb(s.c),g.Kb(p.a),g.Kb(b.a),g.Kb(u.a),g.Kb(h.a),g.Kb(l.R))},e.\u0275cmp=g.Eb({type:e,selectors:[["app-profile"]],viewQuery:function(e,i){var t;1&e&&g.tc(d,!0),2&e&&g.ic(t=g.Yb())&&(i.imageInput=t.first)},decls:5,vars:2,consts:[[4,"ngIf"],[1,"flex-center"],[1,"avatar-big"],[3,"src"],["type","file","hidden","","accept","image/*",3,"change"],["imageInput",""],["fill","clear","size","small",3,"click"],["name","camera","slot","icon-only"],["color","danger",3,"click"],["name","log-out","slot","icon-only"]],template:function(e,i){1&e&&(g.Pb(0,"ion-header"),g.Pb(1,"ion-toolbar"),g.nc(2,y,2,1,"ion-title",0),g.Ob(),g.Ob(),g.Pb(3,"ion-content"),g.nc(4,P,15,1,"ng-container",0),g.Ob()),2&e&&(g.Ab(2),g.fc("ngIf",i.employeeDetail),g.Ab(2),g.fc("ngIf",i.employeeDetail))},directives:[l.r,l.L,o.k,l.n,l.J,l.e,l.i,l.s],styles:[""]}),e})()}];let O=(()=>{class e{}return e.\u0275mod=g.Ib({type:e}),e.\u0275inj=g.Hb({factory:function(i){return new(i||e)},imports:[[o.b,n.a,l.M,r.j.forChild(v)]]}),e})()}}]);