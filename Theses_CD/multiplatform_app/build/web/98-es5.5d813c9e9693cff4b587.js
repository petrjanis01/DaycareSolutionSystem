function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{"723k":function(e,t,i){"use strict";i.r(t),i.d(t,"ProfilePageModule",(function(){return O}));var n=i("ofXK"),r=i("3Pt+"),o=i("tyNb"),a=i("TEn/"),c=i("mrSG"),l=i("F4Db"),s=i("H7h6"),u=i("2g2N"),f=i("ej43"),p=i("64sz"),b=i("PZfV"),h=i("xgIS"),m=i("wO+i"),g=i("fXoL"),v=["imageInput"];function y(e,t){if(1&e&&(g.Pb(0,"ion-title"),g.pc(1),g.Ob()),2&e){var i=g.Zb();g.Ab(1),g.qc(i.employeeDetail.fullName)}}function d(e,t){if(1&e){var i=g.Qb();g.Nb(0),g.Pb(1,"div",1),g.Pb(2,"ion-avatar",2),g.Lb(3,"img",3),g.Ob(),g.Ob(),g.Pb(4,"div",1),g.Pb(5,"input",4,5),g.Xb("change",(function(e){return g.kc(i),g.Zb().processFile(e)})),g.Ob(),g.Pb(7,"ion-button",6),g.Xb("click",(function(){return g.kc(i),g.Zb().changePhoto()})),g.Lb(8,"ion-icon",7),g.pc(9," Change photo "),g.Ob(),g.Ob(),g.Pb(10,"div",1),g.Pb(11,"ion-button",8),g.Xb("click",(function(){return g.kc(i),g.Zb().logout()})),g.Lb(12,"ion-icon",9),g.pc(13," Log out "),g.Ob(),g.Ob(),g.Lb(14,"div",1),g.Mb()}if(2&e){var n=g.Zb();g.Ab(3),g.fc("src",n.employeeDetail.profilePictureUri,g.lc)}}var P,k,w=[{path:"",component:(P=function(){function e(t,i,n,r,o,a,c){_classCallCheck(this,e),this.imageHelper=t,this.employeeService=i,this.auth=n,this.toasterService=r,this.helper=o,this.visualHelper=a,this.platform=c}return _createClass(e,[{key:"ngOnInit",value:function(){this.loadEmployeeProfile()}},{key:"loadEmployeeProfile",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.employeeService.apiEmployeeGetEmployeeDetailGet();case 2:this.employeeDetail=e.sent,null==this.employeeDetail.profilePictureUri&&(this.employeeDetail.profilePictureUri=this.helper.getAnonymousImgUrlFormatted());case 4:case"end":return e.stop()}}),e,this)})))}},{key:"changePhoto",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this.platform.is("capacitor")){e.next=2;break}return e.abrupt("return",void this.imageInput.nativeElement.click());case 2:return e.next=4,this.imageHelper.getImageAsBase64FromDevice();case 4:null!=(t=e.sent)&&this.employeeService.apiEmployeeChangeProfilePicturePost(null,{pictureUri:t}).then((function(){return i.loadEmployeeProfile()})).catch((function(){return i.toasterService.showErrorToast("Changing image failed")}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"logout",value:function(){this.auth.logOut()}},{key:"processFile",value:function(e){var t=this,i=e.target.files,n=i[0];if(i&&n){var r=new FileReader;this.imageToBase64(r,n).subscribe((function(e){null!=e&&t.employeeService.apiEmployeeChangeProfilePicturePost(null,{pictureUri:e}).then((function(){return t.loadEmployeeProfile()})).catch((function(){return t.toasterService.showErrorToast("Changing image failed")}))}))}}},{key:"imageToBase64",value:function(e,t){return e.readAsDataURL(t),Object(h.a)(e,"load").pipe(Object(m.a)("currentTarget","result"))}}]),e}(),P.\u0275fac=function(e){return new(e||P)(g.Kb(l.a),g.Kb(s.c),g.Kb(f.a),g.Kb(u.a),g.Kb(p.a),g.Kb(b.a),g.Kb(a.R))},P.\u0275cmp=g.Eb({type:P,selectors:[["app-profile"]],viewQuery:function(e,t){var i;1&e&&g.tc(v,!0),2&e&&g.ic(i=g.Yb())&&(t.imageInput=i.first)},decls:5,vars:2,consts:[[4,"ngIf"],[1,"flex-center"],[1,"avatar-big"],[3,"src"],["type","file","hidden","","accept","image/*",3,"change"],["imageInput",""],["fill","clear","size","small",3,"click"],["name","camera","slot","icon-only"],["color","danger",3,"click"],["name","log-out","slot","icon-only"]],template:function(e,t){1&e&&(g.Pb(0,"ion-header"),g.Pb(1,"ion-toolbar"),g.nc(2,y,2,1,"ion-title",0),g.Ob(),g.Ob(),g.Pb(3,"ion-content"),g.nc(4,d,15,1,"ng-container",0),g.Ob()),2&e&&(g.Ab(2),g.fc("ngIf",t.employeeDetail),g.Ab(2),g.fc("ngIf",t.employeeDetail))},directives:[a.r,a.L,n.k,a.n,a.J,a.e,a.i,a.s],styles:[""]}),P)}],O=((k=function e(){_classCallCheck(this,e)}).\u0275mod=g.Ib({type:k}),k.\u0275inj=g.Hb({factory:function(e){return new(e||k)},imports:[[n.b,r.a,a.M,o.j.forChild(w)]]}),k)}}]);